# 가격비교 큐레이션 봇

## 개요
여러 쇼핑몰의 상품 가격을 자동으로 수집하여 최저가 정보와 할인 알림을 제공하는 자동화 서비스

## 서비스 흐름
```
[정기 크롤링] → [가격 DB 저장] → [변동 감지] → [알림 발송]
      ↓              ↓              ↓            ↓
  매 시간/일      가격 이력      가격 하락    텔레그램/카톡
                   누적         감지 시
```

---

## 핵심 기능

### 1. 자동 가격 수집
- 인기 상품 카테고리별 정기 크롤링
- 가격 변동 이력 저장
- 역대 최저가 추적

### 2. 가격 변동 알림
```
[알림 예시]
🔥 가격 하락 알림!
📦 애플 에어팟 프로 2세대
💰 289,000원 → 259,000원 (-30,000원)
📊 역대 최저가 대비 +5,000원
🛒 구매하기: [제휴링크]
```

### 3. 카테고리별 큐레이션
| 카테고리 | 수집 빈도 | 인기 상품 예시 |
|----------|----------|---------------|
| 가전/디지털 | 1시간 | 에어팟, 갤럭시, 아이패드 |
| 생활용품 | 6시간 | 세제, 휴지, 물티슈 |
| 식품 | 12시간 | 과자, 음료, 건강식품 |
| 패션 | 24시간 | 신발, 의류, 가방 |

### 4. 최저가 비교표
```
📱 갤럭시 S24 울트라 256GB

| 쇼핑몰 | 가격 | 배송 | 링크 |
|--------|------|------|------|
| 쿠팡 | 1,298,000원 | 로켓 | [링크] |
| 11번가 | 1,285,000원 | 무료 | [링크] |
| G마켓 | 1,310,000원 | 무료 | [링크] |

✅ 최저가: 11번가 (1,285,000원)
```

---

## 데이터 수집 방법

### 공식 API 활용
| 플랫폼 | API | 호출 제한 | 가격 정보 |
|--------|-----|----------|----------|
| 네이버 쇼핑 | 검색 API | 25,000/일 | O |
| 쿠팡 파트너스 | 상품 API | 제한적 | O |
| 11번가 | 오픈 API | 10,000/일 | O |
| 아마존 | PA-API | 1/초 | O |

### 웹 스크래핑 (API 없는 경우)
```python
# 예시 구조
class PriceScraper:
    def scrape_coupang(self, keyword):
        # 검색 결과 페이지 파싱
        pass

    def scrape_gmarket(self, keyword):
        # 검색 결과 페이지 파싱
        pass
```

**주의사항:**
- robots.txt 준수
- 요청 간격 조절 (1-2초)
- User-Agent 설정
- IP 차단 대비 (프록시)

---

## 기술 스택

### 크롤링/스크래핑
| 도구 | 용도 | 특징 |
|------|------|------|
| **Playwright** | 동적 페이지 | 브라우저 자동화 |
| **BeautifulSoup** | 정적 페이지 | 가볍고 빠름 |
| **Scrapy** | 대규모 크롤링 | 프레임워크 |
| **httpx** | API 호출 | 비동기 지원 |

### 스케줄링
| 도구 | 특징 |
|------|------|
| **APScheduler** | Python 내장 스케줄러 |
| **Celery + Redis** | 분산 작업 큐 |
| **cron** | 시스템 스케줄러 |
| **GitHub Actions** | 무료 서버리스 |

### 데이터 저장
| 용도 | 추천 |
|------|------|
| 가격 이력 | PostgreSQL, TimescaleDB |
| 상품 캐시 | Redis |
| 알림 큐 | Redis, RabbitMQ |

### 알림 발송
| 채널 | 난이도 | 비용 |
|------|--------|------|
| 텔레그램 | 쉬움 | 무료 |
| 카카오 알림톡 | 중간 | 건당 과금 |
| 이메일 | 쉬움 | 무료/저렴 |
| 슬랙 | 쉬움 | 무료 |

---

## 아키텍처

```
┌─────────────────────────────────────────────────────────┐
│                    Scheduler (cron)                      │
└─────────────────────┬───────────────────────────────────┘
                      │
          ┌───────────▼───────────┐
          │    Price Collector    │
          │  (크롤러/API 호출)     │
          └───────────┬───────────┘
                      │
          ┌───────────▼───────────┐
          │      Database         │
          │  (가격 이력 저장)      │
          └───────────┬───────────┘
                      │
          ┌───────────▼───────────┐
          │   Price Analyzer      │
          │  (변동 감지/비교)      │
          └───────────┬───────────┘
                      │
          ┌───────────▼───────────┐
          │  Notification Service │
          │  (텔레그램/카톡)       │
          └───────────────────────┘
```

---

## 수익 모델

### 직접 수익
- 가격 알림 내 제휴 링크 삽입
- 클릭 → 구매 시 수수료

### 수익 시뮬레이션
```
구독자 500명
  → 일 알림 10건 발송
  → 알림당 클릭률 5% = 250클릭/일
  → 구매 전환율 2% = 5건/일
  → 평균 구매가 30,000원, 수수료 2.5%
  → 일 수익 = 5 × 30,000 × 0.025 = 3,750원
  → 월 수익 = 약 112,500원

구독자 5,000명 시
  → 월 수익 = 약 1,125,000원
```

---

## 개발 단계

### Phase 1: MVP (1-2주)
- [ ] 단일 쇼핑몰 크롤러 (쿠팡)
- [ ] 간단한 가격 DB (SQLite)
- [ ] 텔레그램 알림 발송
- [ ] 수동 상품 등록

### Phase 2: 확장 (2-3주)
- [ ] 다중 쇼핑몰 지원
- [ ] 가격 비교 기능
- [ ] 역대 최저가 추적
- [ ] 사용자 관심상품 등록

### Phase 3: 자동화 (2-3주)
- [ ] 인기 상품 자동 수집
- [ ] 카테고리별 큐레이션
- [ ] 가격 예측 (선택)

---

## 장점
- **수동 개입 최소화**: 한 번 설정하면 자동 운영
- **확장성**: 상품/쇼핑몰 추가 용이
- **데이터 축적**: 가격 이력 → 인사이트
- **사용자 가치**: 실제로 돈 아껴줌

## 단점
- **크롤링 리스크**: 차단/법적 이슈 가능
- **유지보수**: 사이트 구조 변경 시 대응 필요
- **서버 비용**: 24시간 운영 필요

## 경쟁 서비스
- 다나와, 에누리: 웹 기반
- 네이버 가격비교: 검색 기반
- **차별점**: 푸시 알림 + 제휴 수익 + 커스터마이징

---

## 법적 고려사항

### 크롤링 관련
- robots.txt 준수 권장
- 과도한 요청 금지
- 개인정보 수집 금지
- 상업적 이용 시 주의

### 제휴 마케팅 관련
- 광고임을 명시 (공정거래위원회 가이드라인)
- 허위/과장 광고 금지

---

## 시작하기 전 체크리스트
- [ ] 쿠팡 파트너스 가입
- [ ] 네이버 개발자 센터 API 키 발급
- [ ] 텔레그램 봇 생성
- [ ] 서버 환경 준비 (또는 GitHub Actions)
- [ ] 모니터링 대상 상품 리스트 작성

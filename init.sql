-- 물건 테이블
CREATE TABLE objects (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) UNIQUE NOT NULL,
    category VARCHAR(50) NOT NULL,
    created_at TIMESTAMP DEFAULT NOW()
);

-- 생명체 테이블
CREATE TABLE creatures (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) UNIQUE NOT NULL,
    category VARCHAR(50) NOT NULL,
    created_at TIMESTAMP DEFAULT NOW()
);

-- 사용된 조합 기록 (중복 방지)
CREATE TABLE combinations_used (
    id SERIAL PRIMARY KEY,
    object_id INT REFERENCES objects(id),
    creature_id INT REFERENCES creatures(id),
    content_type VARCHAR(50),
    used_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(object_id, creature_id, content_type)
);

-- 인덱스 생성
CREATE INDEX idx_objects_category ON objects(category);
CREATE INDEX idx_creatures_category ON creatures(category);

-- =====================
-- 초기 데이터: 물건
-- =====================

-- 도구
INSERT INTO objects (name, category) VALUES
('망치', '도구'), ('칼', '도구'), ('우산', '도구'), ('가위', '도구'),
('열쇠', '도구'), ('손전등', '도구'), ('망원경', '도구'), ('돋보기', '도구'),
('낚싯대', '도구'), ('삽', '도구'), ('톱', '도구'), ('펜치', '도구');

-- 가전
INSERT INTO objects (name, category) VALUES
('에어컨', '가전'), ('냉장고', '가전'), ('TV', '가전'), ('세탁기', '가전'),
('전자레인지', '가전'), ('청소기', '가전'), ('선풍기', '가전'), ('토스터', '가전'),
('믹서기', '가전'), ('다리미', '가전'), ('헤어드라이어', '가전'), ('전기밥솥', '가전');

-- 탈것
INSERT INTO objects (name, category) VALUES
('자동차', '탈것'), ('비행기', '탈것'), ('로켓', '탈것'), ('자전거', '탈것'),
('오토바이', '탈것'), ('헬리콥터', '탈것'), ('잠수함', '탈것'), ('요트', '탈것'),
('스케이트보드', '탈것'), ('썰매', '탈것'), ('열기구', '탈것'), ('제트스키', '탈것');

-- 악기
INSERT INTO objects (name, category) VALUES
('피아노', '악기'), ('기타', '악기'), ('드럼', '악기'), ('바이올린', '악기'),
('트럼펫', '악기'), ('플루트', '악기'), ('하프', '악기'), ('색소폰', '악기'),
('아코디언', '악기'), ('탬버린', '악기'), ('실로폰', '악기'), ('우쿨렐레', '악기');

-- 무기
INSERT INTO objects (name, category) VALUES
('검', '무기'), ('방패', '무기'), ('활', '무기'), ('창', '무기'),
('도끼', '무기'), ('석궁', '무기'), ('삼지창', '무기'), ('철퇴', '무기'),
('부메랑', '무기'), ('표창', '무기'), ('쌍절곤', '무기'), ('채찍', '무기');

-- 일상용품
INSERT INTO objects (name, category) VALUES
('물컵', '일상용품'), ('휴대폰', '일상용품'), ('책', '일상용품'), ('신발', '일상용품'),
('안경', '일상용품'), ('시계', '일상용품'), ('지갑', '일상용품'), ('가방', '일상용품'),
('모자', '일상용품'), ('장갑', '일상용품'), ('목도리', '일상용품'), ('양말', '일상용품');

-- 가구
INSERT INTO objects (name, category) VALUES
('의자', '가구'), ('책상', '가구'), ('침대', '가구'), ('소파', '가구'),
('옷장', '가구'), ('책장', '가구'), ('식탁', '가구'), ('서랍장', '가구'),
('거울', '가구'), ('화장대', '가구'), ('신발장', '가구'), ('행거', '가구');

-- 스포츠용품
INSERT INTO objects (name, category) VALUES
('축구공', '스포츠'), ('야구방망이', '스포츠'), ('테니스라켓', '스포츠'), ('골프채', '스포츠'),
('농구공', '스포츠'), ('배드민턴라켓', '스포츠'), ('스키', '스포츠'), ('스노보드', '스포츠'),
('권투글러브', '스포츠'), ('볼링공', '스포츠'), ('다트', '스포츠'), ('탁구채', '스포츠');

-- =====================
-- 초기 데이터: 생명체
-- =====================

-- 포유류
INSERT INTO creatures (name, category) VALUES
('고양이', '포유류'), ('강아지', '포유류'), ('사자', '포유류'), ('호랑이', '포유류'),
('코끼리', '포유류'), ('기린', '포유류'), ('곰', '포유류'), ('늑대', '포유류'),
('여우', '포유류'), ('토끼', '포유류'), ('다람쥐', '포유류'), ('햄스터', '포유류'),
('판다', '포유류'), ('코알라', '포유류'), ('캥거루', '포유류'), ('하마', '포유류');

-- 조류
INSERT INTO creatures (name, category) VALUES
('펭귄', '조류'), ('닭', '조류'), ('독수리', '조류'), ('앵무새', '조류'),
('부엉이', '조류'), ('플라밍고', '조류'), ('공작', '조류'), ('까마귀', '조류'),
('비둘기', '조류'), ('참새', '조류'), ('오리', '조류'), ('거위', '조류');

-- 수중생물
INSERT INTO creatures (name, category) VALUES
('상어', '수중생물'), ('고래', '수중생물'), ('돌고래', '수중생물'), ('문어', '수중생물'),
('오징어', '수중생물'), ('해파리', '수중생물'), ('거북이', '수중생물'), ('게', '수중생물'),
('새우', '수중생물'), ('불가사리', '수중생물'), ('조개', '수중생물'), ('해마', '수중생물');

-- 파충류/양서류
INSERT INTO creatures (name, category) VALUES
('공룡', '파충류'), ('악어', '파충류'), ('뱀', '파충류'), ('도마뱀', '파충류'),
('카멜레온', '파충류'), ('이구아나', '파충류'), ('개구리', '양서류'), ('도롱뇽', '양서류');

-- 곤충
INSERT INTO creatures (name, category) VALUES
('꿀벌', '곤충'), ('나비', '곤충'), ('개미', '곤충'), ('무당벌레', '곤충'),
('잠자리', '곤충'), ('반딧불이', '곤충'), ('귀뚜라미', '곤충'), ('사마귀', '곤충');

-- 상상의 동물
INSERT INTO creatures (name, category) VALUES
('드래곤', '상상'), ('유니콘', '상상'), ('피닉스', '상상'), ('그리핀', '상상'),
('페가수스', '상상'), ('켄타우로스', '상상'), ('미노타우로스', '상상'), ('키메라', '상상'),
('크라켄', '상상'), ('고블린', '상상'), ('트롤', '상상'), ('오크', '상상'),
('엘프', '상상'), ('요정', '상상'), ('인어', '상상'), ('늑대인간', '상상');

-- 인간형/기타
INSERT INTO creatures (name, category) VALUES
('로봇', '기타'), ('외계인', '기타'), ('좀비', '기타'), ('해골', '기타'),
('유령', '기타'), ('닌자', '기타'), ('해적', '기타'), ('기사', '기타'),
('마법사', '기타'), ('슈퍼히어로', '기타'), ('거인', '기타'), ('난쟁이', '기타');

-- 랜덤 조합 뷰 (사용 안 된 조합만)
CREATE VIEW random_unused_combination AS
SELECT
    o.id as object_id,
    o.name as object_name,
    o.category as object_category,
    c.id as creature_id,
    c.name as creature_name,
    c.category as creature_category
FROM objects o
CROSS JOIN creatures c
WHERE NOT EXISTS (
    SELECT 1 FROM combinations_used cu
    WHERE cu.object_id = o.id AND cu.creature_id = c.id
)
ORDER BY RANDOM()
LIMIT 1;

-- =====================
-- 추가 데이터: 물건
-- =====================

-- 음식
INSERT INTO objects (name, category) VALUES
('피자', '음식'), ('햄버거', '음식'), ('김치', '음식'), ('초밥', '음식'),
('타코', '음식'), ('파스타', '음식'), ('치킨', '음식'), ('스테이크', '음식'),
('라면', '음식'), ('떡볶이', '음식'), ('아이스크림', '음식'), ('케이크', '음식'),
('도넛', '음식'), ('샌드위치', '음식'), ('핫도그', '음식'), ('감자튀김', '음식')
ON CONFLICT (name) DO NOTHING;

-- 건물/구조물
INSERT INTO objects (name, category) VALUES
('성', '건물'), ('피라미드', '건물'), ('등대', '건물'), ('풍차', '건물'),
('탑', '건물'), ('다리', '건물'), ('댐', '건물'), ('터널', '건물'),
('정글짐', '건물'), ('미끄럼틀', '건물'), ('관람차', '건물'), ('롤러코스터', '건물'),
('텐트', '건물'), ('이글루', '건물'), ('트리하우스', '건물'), ('벙커', '건물')
ON CONFLICT (name) DO NOTHING;

-- 자연물
INSERT INTO objects (name, category) VALUES
('바위', '자연물'), ('나무', '자연물'), ('구름', '자연물'), ('번개', '자연물'),
('무지개', '자연물'), ('폭포', '자연물'), ('화산', '자연물'), ('빙하', '자연물'),
('모래', '자연물'), ('진흙', '자연물'), ('이끼', '자연물'), ('산호', '자연물'),
('조개껍데기', '자연물'), ('깃털', '자연물'), ('뿔', '자연물'), ('상어이빨', '자연물')
ON CONFLICT (name) DO NOTHING;

-- SF/미래
INSERT INTO objects (name, category) VALUES
('광선검', 'SF'), ('타임머신', 'SF'), ('텔레포터', 'SF'), ('홀로그램', 'SF'),
('로봇팔', 'SF'), ('제트팩', 'SF'), ('레이저건', 'SF'), ('포스필드', 'SF'),
('우주복', 'SF'), ('냉동캡슐', 'SF'), ('클론머신', 'SF'), ('반중력부츠', 'SF'),
('나노봇', 'SF'), ('사이버눈', 'SF'), ('뇌칩', 'SF'), ('플라즈마캐논', 'SF')
ON CONFLICT (name) DO NOTHING;

-- 마법/판타지
INSERT INTO objects (name, category) VALUES
('마법지팡이', '판타지'), ('수정구슬', '판타지'), ('마법책', '판타지'), ('포션', '판타지'),
('마법카펫', '판타지'), ('투명망토', '판타지'), ('소원램프', '판타지'), ('마법거울', '판타지'),
('저주인형', '판타지'), ('봉인석', '판타지'), ('소환진', '판타지'), ('룬문자', '판타지'),
('성배', '판타지'), ('엑스칼리버', '판타지'), ('반지', '판타지'), ('왕관', '판타지')
ON CONFLICT (name) DO NOTHING;

-- 문구/사무용품
INSERT INTO objects (name, category) VALUES
('연필', '문구'), ('지우개', '문구'), ('자', '문구'), ('컴퍼스', '문구'),
('스테이플러', '문구'), ('테이프', '문구'), ('클립', '문구'), ('포스트잇', '문구'),
('화이트보드', '문구'), ('프로젝터', '문구'), ('프린터', '문구'), ('복사기', '문구')
ON CONFLICT (name) DO NOTHING;

-- 장난감
INSERT INTO objects (name, category) VALUES
('레고', '장난감'), ('인형', '장난감'), ('요요', '장난감'), ('팽이', '장난감'),
('퍼즐', '장난감'), ('루빅스큐브', '장난감'), ('슬라임', '장난감'), ('비눗방울', '장난감'),
('물총', '장난감'), ('네프건', '장난감'), ('드론장난감', 'RC'), ('RC카', '장난감'),
('보드게임', '장난감'), ('카드', '장난감'), ('주사위', '장난감'), ('다트판', '장난감')
ON CONFLICT (name) DO NOTHING;

-- 의료용품
INSERT INTO objects (name, category) VALUES
('주사기', '의료'), ('청진기', '의료'), ('붕대', '의료'), ('목발', '의료'),
('휠체어', '의료'), ('깁스', '의료'), ('체온계', '의료'), ('혈압계', '의료'),
('현미경', '의료'), ('X레이', '의료'), ('MRI', '의료'), ('제세동기', '의료')
ON CONFLICT (name) DO NOTHING;

-- 주방용품
INSERT INTO objects (name, category) VALUES
('프라이팬', '주방'), ('냄비', '주방'), ('국자', '주방'), ('뒤집개', '주방'),
('도마', '주방'), ('믹서기', '주방'), ('오븐', '주방'), ('에어프라이어', '주방'),
('커피머신', '주방'), ('와플기계', '주방'), ('식기세척기', '주방'), ('정수기', '주방')
ON CONFLICT (name) DO NOTHING;

-- 캠핑용품
INSERT INTO objects (name, category) VALUES
('캠핑의자', '캠핑'), ('랜턴', '캠핑'), ('침낭', '캠핑'), ('해먹', '캠핑'),
('쿨러', '캠핑'), ('버너', '캠핑'), ('코펠', '캠핑'), ('타프', '캠핑'),
('등산스틱', '캠핑'), ('나침반', '캠핑'), ('맥가이버칼', '캠핑'), ('라이터', '캠핑')
ON CONFLICT (name) DO NOTHING;

-- 전자기기
INSERT INTO objects (name, category) VALUES
('노트북', '전자기기'), ('태블릿', '전자기기'), ('스마트워치', '전자기기'), ('이어폰', '전자기기'),
('스피커', '전자기기'), ('카메라', '전자기기'), ('빔프로젝터', '전자기기'), ('게임기', '전자기기'),
('VR헤드셋', '전자기기'), ('킨들', '전자기기'), ('GPS', '전자기기'), ('웹캠', '전자기기')
ON CONFLICT (name) DO NOTHING;

-- =====================
-- 추가 데이터: 생명체
-- =====================

-- 직업
INSERT INTO creatures (name, category) VALUES
('소방관', '직업'), ('경찰관', '직업'), ('요리사', '직업'), ('과학자', '직업'),
('의사', '직업'), ('간호사', '직업'), ('선생님', '직업'), ('변호사', '직업'),
('건축가', '직업'), ('화가', '직업'), ('음악가', '직업'), ('배우', '직업'),
('운동선수', '직업'), ('우주비행사', '직업'), ('탐험가', '직업'), ('사육사', '직업'),
('조종사', '직업'), ('선장', '직업'), ('광부', '직업'), ('농부', '직업')
ON CONFLICT (name) DO NOTHING;

-- 역사적 캐릭터
INSERT INTO creatures (name, category) VALUES
('바이킹', '역사'), ('사무라이', '역사'), ('검투사', '역사'), ('스파르탄', '역사'),
('카우보이', '역사'), ('무사', '역사'), ('궁수', '역사'), ('십자군', '역사'),
('파라오', '역사'), ('황제', '역사'), ('여왕', '역사'), ('왕자', '역사'),
('공주', '역사'), ('귀족', '역사'), ('농노', '역사'), ('대장장이', '역사')
ON CONFLICT (name) DO NOTHING;

-- 더 많은 상상 동물
INSERT INTO creatures (name, category) VALUES
('히드라', '상상'), ('케르베로스', '상상'), ('바실리스크', '상상'), ('만티코어', '상상'),
('스핑크스', '상상'), ('하피', '상상'), ('사이클롭스', '상상'), ('메두사', '상상'),
('골렘', '상상'), ('슬라임', '상상'), ('위습', '상상'), ('임프', '상상'),
('가고일', '상상'), ('뱀파이어', '상상'), ('미라', '상상'), ('프랑켄슈타인', '상상'),
('워울프', '상상'), ('설인', '상상'), ('빅풋', '상상'), ('네시', '상상')
ON CONFLICT (name) DO NOTHING;

-- 귀여운 동물
INSERT INTO creatures (name, category) VALUES
('치와와', '포유류'), ('포메라니안', '포유류'), ('시바견', '포유류'), ('골든리트리버', '포유류'),
('페르시안고양이', '포유류'), ('먼치킨', '포유류'), ('래그돌', '포유류'), ('수달', '포유류'),
('미어캣', '포유류'), ('친칠라', '포유류'), ('페럿', '포유류'), ('고슴도치', '포유류'),
('슈가글라이더', '포유류'), ('카피바라', '포유류'), ('알파카', '포유류'), ('라마', '포유류')
ON CONFLICT (name) DO NOTHING;

-- 바다생물 추가
INSERT INTO creatures (name, category) VALUES
('대왕오징어', '수중생물'), ('흰동가리', '수중생물'), ('해룡', '수중생물'), ('만타레이', '수중생물'),
('바다코끼리', '수중생물'), ('물개', '수중생물'), ('펭귄황제', '수중생물'), ('바다거북', '수중생물'),
('산호', '수중생물'), ('말미잘', '수중생물'), ('성게', '수중생물'), ('랍스터', '수중생물')
ON CONFLICT (name) DO NOTHING;

-- 공룡 종류
INSERT INTO creatures (name, category) VALUES
('티라노사우루스', '공룡'), ('트리케라톱스', '공룡'), ('브라키오사우루스', '공룡'), ('벨로키랍토르', '공룡'),
('스테고사우루스', '공룡'), ('안킬로사우루스', '공룡'), ('프테라노돈', '공룡'), ('스피노사우루스', '공룡'),
('파라사우롤로푸스', '공룡'), ('딜로포사우루스', '공룡'), ('이구아노돈', '공룡'), ('알로사우루스', '공룡')
ON CONFLICT (name) DO NOTHING;

-- 로봇/AI 종류
INSERT INTO creatures (name, category) VALUES
('안드로이드', '기계'), ('사이보그', '기계'), ('드로이드', '기계'), ('메카', '기계'),
('자동청소로봇', '기계'), ('배달로봇', '기계'), ('의료로봇', '기계'), ('군사로봇', '기계'),
('AI비서', '기계'), ('챗봇', '기계'), ('자율주행차', '기계'), ('드론배송', '기계')
ON CONFLICT (name) DO NOTHING;

-- 신화 속 존재
INSERT INTO creatures (name, category) VALUES
('천사', '신화'), ('악마', '신화'), ('신', '신화'), ('여신', '신화'),
('큐피드', '신화'), ('제우스', '신화'), ('포세이돈', '신화'), ('하데스', '신화'),
('아테나', '신화'), ('아폴로', '신화'), ('토르', '신화'), ('오딘', '신화'),
('손오공', '신화'), ('저팔계', '신화'), ('삼장법사', '신화'), ('사오정', '신화')
ON CONFLICT (name) DO NOTHING;

-- 귀신/공포
INSERT INTO creatures (name, category) VALUES
('귀신', '공포'), ('처녀귀신', '공포'), ('도깨비', '공포'), ('구미호', '공포'),
('저승사자', '공포'), ('강시', '공포'), ('원귀', '공포'), ('물귀신', '공포'),
('산신령', '공포'), ('해태', '공포'), ('불가사리', '공포'), ('삼족오', '공포')
ON CONFLICT (name) DO NOTHING;

-- 게임/애니 캐릭터 타입
INSERT INTO creatures (name, category) VALUES
('용사', '캐릭터'), ('마왕', '캐릭터'), ('힐러', '캐릭터'), ('탱커', '캐릭터'),
('어쌔신', '캐릭터'), ('궁사', '캐릭터'), ('소환사', '캐릭터'), ('연금술사', '캐릭터'),
('바드', '캐릭터'), ('팔라딘', '캐릭터'), ('네크로맨서', '캐릭터'), ('드루이드', '캐릭터')
ON CONFLICT (name) DO NOTHING;
